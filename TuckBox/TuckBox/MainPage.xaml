<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="TuckBox.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="TuckBox"
    Shell.NavBarIsVisible="True">

    <!-- 3-dot overflow menu -->
    <ContentPage.ToolbarItems>
        <ToolbarItem x:Name="MoreItem" Text="⋮" Order="Primary" Priority="0" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="12">

            <!-- WELCOME -->
            <Label x:Name="WelcomeLabel"
                   Text="WELCOME"
                   FontAttributes="Bold"
                   FontSize="22" />

            <!-- big actions -->
            <Button Text="PLACE ORDER"      Command="{Binding GoPlaceOrderCommand}" />
            <Button Text="UPDATE USER INFO" Command="{Binding GoUpdateUserCommand}" />
            <Button Text="ORDER HISTORY"    Command="{Binding GoOrderHistoryCommand}" />

            <Label Text="CURRENT ORDER" FontAttributes="Bold" FontSize="18" Margin="0,16,0,4"/>

            <!-- summary text (order id, date, city, total) -->
            <Label x:Name="CurrentOrderLabel"
       Text="No current order."
       LineBreakMode="WordWrap" />

            <!-- NEW: horizontal scroller for items -->
            <CollectionView x:Name="CurrentOrderItems"
                ItemsLayout="HorizontalList"
                IsVisible="False"            
                HeightRequest="110"
                Margin="0,8,0,0" 
                >

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="8" Margin="4" CornerRadius="8" BackgroundColor="#F5F5F5">
                            <VerticalStackLayout Spacing="4">
                                <Label Text="{Binding Food_Name}" FontAttributes="Bold" FontSize="13" />
                                <Label Text="{Binding Option_Value}" FontSize="11" TextColor="Gray" />
                                <Label Text="{Binding Quantity, StringFormat='Qty: {0}'}" FontSize="11" />
                                <Label Text="{Binding Line_Total, StringFormat='${0:F2}'}" FontSize="11" TextColor="#C2185B" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
