<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TuckBox.Views.PlaceOrder"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Title="Place Order">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="12">

            <Label Text="PLACE YOUR ORDER" FontAttributes="Bold" FontSize="22" />

            <!-- City -->
            <Label Text="Select your city" FontAttributes="Bold" />
            <Picker x:Name="CityPicker"
                    ItemDisplayBinding="{Binding City_Name}"
                    Title="Choose city" />

            <!-- Time Slot -->
            <Label Text="Select delivery time slot" FontAttributes="Bold" />
            <Picker x:Name="SlotPicker"
                    ItemDisplayBinding="{Binding Time_Slot}"
                    Title="Choose time slot" />

            <!-- Address -->
            <Label Text="Select delivery address" FontAttributes="Bold" />
            <HorizontalStackLayout Spacing="8">
                <Picker x:Name="AddressPicker"
                        ItemDisplayBinding="{Binding Address}"
                        HorizontalOptions="FillAndExpand"
                        Title="Choose address" />
                <Button Text="ADD" Clicked="OnAddAddressClicked" />
            </HorizontalStackLayout>

            <BoxView HeightRequest="1" BackgroundColor="#DDD" />

            <Label Text="Menu" FontAttributes="Bold" FontSize="20" />

            <!-- Foods with quantity + option choice -->
            <CollectionView x:Name="FoodsList" ItemsLayout="VerticalList">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="#ccc" CornerRadius="12" Padding="12" Margin="0,6">
                            <VerticalStackLayout Spacing="8">

                                <Label Text="{Binding Food_Name}" FontAttributes="Bold" FontSize="18"/>
                                <Label Text="{Binding Description}" FontSize="14" TextColor="#666"/>

                                <!-- Option group -->
                                <VerticalStackLayout>
                                    <Label Text="{Binding Option_Key}" FontAttributes="Bold"/>
                                    <HorizontalStackLayout x:Name="OptionsHost" Spacing="12"/>
                                </VerticalStackLayout>

                                <!-- qty row -->
                                <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                                    <Button Text="-" WidthRequest="42" Clicked="OnMinusClicked"/>
                                    <Label Text="0" x:Name="QtyLabel" FontAttributes="Bold" FontSize="18"
                                    WidthRequest="32" HorizontalTextAlignment="Center"/>
                                    <Button Text="+" WidthRequest="42" Clicked="OnPlusClicked"/>
                                    <Label Text="{Binding Price, StringFormat='${0:F2}'}" FontAttributes="Bold" />
                                </HorizontalStackLayout>

                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


            <BoxView HeightRequest="1" BackgroundColor="#DDD" />

            <HorizontalStackLayout Spacing="12">
                <Button Text="PLACE ORDER" Clicked="OnPlaceOrderClicked" />
                <Button Text="CANCEL"      Clicked="OnCancelClicked" />
            </HorizontalStackLayout>

            <Label x:Name="StatusLabel" TextColor="Red"/>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>